<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MedlemsomrÃ¥de</title>

  <link rel="stylesheet" href="base.css" /> 
  <link rel="stylesheet" href="menu.css" />
<style>
.citat-boks {
  margin-top: 2rem;
  padding: 1rem;
  border-left: 4px solid #007bff;
  background-color: #f0f8ff;
  font-style: italic;
  font-size: 1rem;
  color: #333;
  border-radius: 6px;
  max-width: 600px;
}

</style>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script type="module">
  import { adgangskontrol, indsÃ¦tMenu } from './auth.js';

  adgangskontrol({
    tilladteRoller: [],
    redirectVedFejl: "protected.html",
    efterLogin: (bruger) => {
      indsÃ¦tMenu(bruger); 
    }
  });
</script>
</head>
<body>

  <h1 id="velkomst">Velkommen!</h1>
 

<script>
  const client = supabase.createClient(
    "https://cianxaxaphvrutmstydr.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpYW54YXhhcGh2cnV0bXN0eWRyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MTk2NTAsImV4cCI6MjA2NTM5NTY1MH0.gdBTs6VoPx3BUAPW63o7kh3WbaCrjfe5YIRe3ubV_mQ"
  );

  async function init() {
    const { data: { user }, error } = await client.auth.getUser();

    if (!user || error) {
      localStorage.removeItem("bruger");
      window.location.href = "index.html"; // Brug index som login
      return;
    }

    let bruger = localStorage.getItem("bruger");

    if (!bruger) {
      const { data: profile, error: profileError } = await client
        .from("users")
        .select("navn, rolle")
        .eq("id", user.id)
        .single();

      if (error || profileError || !profile) {
        console.error("Fejl ved hentning af profil:", error || profileError);
        window.location.href = "404.html";
        return;
      }

      bruger = {
        id: user.id,
        navn: profile.navn,
        rolle: profile.rolle
      };

      localStorage.setItem("bruger", JSON.stringify(bruger));
    } else {
      bruger = JSON.parse(bruger);
    }

    document.getElementById("velkomst").textContent = `Hej, ${bruger.navn}!`;
  }

  init();

  async function logout() {
    localStorage.removeItem("bruger");
    const { error } = await client.auth.signOut();
    if (!error) {
      setTimeout(() => {
        window.location.href = "index.html"; // Tilbage til login
      }, 300);
    }
  }
</script>


<script>
const klatreCitater = [
  "ğŸ§—â€â™‚ï¸ Livet starter, hvor komfortzonen slutter.",
  "ğŸ§—â€â™€ï¸ Nogle ser en mur â€“ andre ser en mulighed for at klatre.",
  "ğŸ§—â€â™‚ï¸ SmÃ¥ greb, store skridt.",
  "ğŸ§—â€â™€ï¸ Det handler ikke om at nÃ¥ toppen â€“ det handler om rejsen op.",
  "ğŸ§—â€â™‚ï¸ Klip dig fast i nuet og klatr mod dine mÃ¥l.",
  "ğŸ§—â€â™€ï¸ NÃ¥r alt andet glipper â€“ find et bedre fodfÃ¦ste.",
  "ğŸ§—â€â™‚ï¸ Hvert greb du tager, gÃ¸r dig stÃ¦rkere.",
  "ğŸ§—â€â™€ï¸ Falder du? SÃ¥ lÃ¦r og prÃ¸v igen â€“ sÃ¥dan klatrer vi ogsÃ¥ i livet.",
  "ğŸ§—â€â™‚ï¸ Ingen top uden sved â€“ og smil.",
  "ğŸ§—â€â™‚ï¸ Grebet er lille, men viljen er stor.",
  "ğŸ§—â€â™€ï¸ Du falder ikke â€“ du lÃ¦rer at flyve nedad.",
  "ğŸ§—â€â™‚ï¸ Et skridt ad gangen. Et greb ad gangen. En sejr ad gangen.",
  "ğŸ§—â€â™€ï¸ VÃ¦ggen tester ikke dine muskler â€“ den tester din beslutsomhed.",
  "ğŸ§—â€â™‚ï¸ Der findes ingen lige vej til toppen, kun din egen.",
  "ğŸ§—â€â™€ï¸ Klatring handler ikke om styrke. Det handler om tillid â€“ til dig selv.",
  "ğŸ§—â€â™‚ï¸ NÃ¥r grebet glider, grib chancen for at prÃ¸ve igen.",
  "ğŸ§—â€â™€ï¸ Sved pÃ¥ fingrene, ild i hjertet.",
  "ğŸ§—â€â™‚ï¸ Det er fÃ¸rst, nÃ¥r du hÃ¦nger i et fingerboard, du mÃ¦rker hvad du bestÃ¥r af.",
  "ğŸ§—â€â™€ï¸ Jo hÃ¸jere du kommer, jo mere ser du, hvor langt du allerede er nÃ¥et."
];


  function visTilfÃ¦ldigCitat() {
    const citatElement = document.getElementById("klatre-citat");
    const citat = klatreCitater[Math.floor(Math.random() * klatreCitater.length)];
    citatElement.textContent = citat;
  }

  document.addEventListener("DOMContentLoaded", visTilfÃ¦ldigCitat);
</script>




<div id="klatre-citat" class="citat-boks"></div>


</div>


</body>
</html>
