<!DOCTYPE html>
<html lang="da">
<head>
  <script src="gate.js"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MedlemsomrÃ¥de</title>

  <link rel="stylesheet" href="base.css" />
  <link rel="stylesheet" href="menu.css" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    .citat-boks {
      margin-top: 2rem;
      padding: 1rem;
      border-left: 4px solid #007bff;
      background-color: #f0f8ff;
      font-style: italic;
      font-size: 1rem;
      color: #333;
      border-radius: 6px;
      max-width: 600px;
    }
  </style>

  <script type="module">
    import { client, adgangskontrol, indsÃ¦tMenu } from './auth.js';

    adgangskontrol({
      tilladteRoller: [],
      redirectVedFejl: "index.html",
      efterLogin: async (bruger) => {
	    if (window.releaseAuthGate) window.releaseAuthGate();
        indsÃ¦tMenu(bruger);

        const h1 = document.getElementById("velkomst");
        if (h1) h1.textContent = bruger?.navn ? `Hej, ${bruger.navn}!` : "Velkommen!";

        try {
          if (bruger?.id) {
            const { data: profile } = await client
              .from("users").select("navn, rolle").eq("id", bruger.id).single();
            if (profile) {
              localStorage.setItem("bruger", JSON.stringify({
                id: bruger.id, navn: profile.navn, rolle: profile.rolle
              }));
            }
          }
        } catch(_) {}
      }
    });
  </script>
</head>
<body>
  <h1 id="velkomst">Velkommen!</h1>
  <div id="klatre-citat" class="citat-boks"></div>

  <script>
    const klatreCitater = [
      "ğŸ§—â€â™‚ï¸ Livet starter, hvor komfortzonen slutter.",
      "ğŸ§—â€â™€ï¸ Nogle ser en mur â€“ andre ser en mulighed for at klatre.",
      "ğŸ§—â€â™‚ï¸ SmÃ¥ greb, store skridt.",
      "ğŸ§—â€â™€ï¸ Det handler ikke om at nÃ¥ toppen â€“ det handler om rejsen op.",
      "ğŸ§—â€â™‚ï¸ Klip dig fast i nuet og klatr mod dine mÃ¥l.",
      "ğŸ§—â€â™€ï¸ NÃ¥r alt andet glipper â€“ find et bedre fodfÃ¦ste.",
      "ğŸ§—â€â™‚ï¸ Hvert greb du tager, gÃ¸r dig stÃ¦rkere.",
      "ğŸ§—â€â™€ï¸ Falder du? SÃ¥ lÃ¦r og prÃ¸v igen â€“ sÃ¥dan klatrer vi ogsÃ¥ i livet.",
      "ğŸ§—â€â™‚ï¸ Ingen top uden sved â€“ og smil.",
      "ğŸ§—â€â™‚ï¸ Grebet er lille, men viljen er stor.",
      "ğŸ§—â€â™€ï¸ Du falder ikke â€“ du lÃ¦rer at flyve nedad.",
      "ğŸ§—â€â™‚ï¸ Et skridt ad gangen. Et greb ad gangen. En sejr ad gangen.",
      "ğŸ§—â€â™€ï¸ VÃ¦ggen tester ikke dine muskler â€“ den tester din beslutsomhed.",
      "ğŸ§—â€â™‚ï¸ Der findes ingen lige vej til toppen, kun din egen.",
      "ğŸ§—â€â™€ï¸ Klatring handler ikke om styrke. Det handler om tillid â€“ til dig selv.",
      "ğŸ§—â€â™‚ï¸ NÃ¥r grebet glider, grib chancen for at prÃ¸ve igen.",
      "ğŸ§—â€â™€ï¸ Sved pÃ¥ fingrene, ild i hjertet.",
      "ğŸ§—â€â™‚ï¸ Det er fÃ¸rst, nÃ¥r du hÃ¦nger i et fingerboard, du mÃ¦rker hvad du bestÃ¥r af.",
      "ğŸ§—â€â™€ï¸ Jo hÃ¸jere du kommer, jo mere ser du, hvor langt du allerede er nÃ¥et."
    ];

    function visTilfÃ¦ldigCitat() {
      const el = document.getElementById("klatre-citat");
      if (!el) return;
      const citat = klatreCitater[Math.floor(Math.random() * klatreCitater.length)];
      el.textContent = citat;
    }

    document.addEventListener("DOMContentLoaded", visTilfÃ¦ldigCitat);
  </script>
</body>
</html>
